<!DOCTYPE html>
<html>
<head>
  <title>Handshake NFT Metadata Lookup</title>
</head>
<body>
  <form>
    <label for="nftId">Enter Handshake NFT ID:</label>
    <input type="text" id="nftId" name="nftId">
    <button type="button" onclick="fetchMetadata()">Search</button>
  </form>
  <div id="metadata"></div>

  <script type="text/javascript">
    const HSClient = require('hs-client-js');
    const client = new HSClient({ network: 'main' });

    async function fetchMetadata() {
      const nftId = document.getElementById('nftId').value;
      const domainName = `${nftId}.nft`;
      const txtRecords = await client.fetchTXT(domainName);
      const metadataRecord = txtRecords.find(record => record.name === 'handshakenft');
      if (metadataRecord) {
        const metadataUrl = metadataRecord.txt[0];
        const metadata = await fetch(metadataUrl).then(res => res.json());
        const metadataDiv = document.getElementById('metadata');
        metadataDiv.innerHTML = JSON.stringify(metadata, null, 2);
      } else {
        alert('No metadata found for NFT');
      }
    }
  </script>
</body>
</html>
